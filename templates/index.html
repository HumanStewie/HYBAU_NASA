<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NASA Space Apps - HYBAU</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../static/css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
</head>
<body>
    <!-- Map Placeholder -->
    <div id="map"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-bar"></div>
    </div>

    <!-- Top Navigation -->
    <nav class="top-nav">
         <div class="logo">
            <i class="fas fa-satellite"></i>
            <span>HYBAU</span>
        </div>

        <div class="search-container" style="position: relative;">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-bar" placeholder="Search location...">
        </div>

        <div class="mode-switcher">
            <button class="mode-btn active" data-mode="air-quality">
                <i class="fas fa-wind"></i> Air Quality
            </button>
            <button class="mode-btn" data-mode="weather">
                <i class="fas fa-cloud-sun"></i> Weather
            </button>
        </div>
    </nav>

    <!-- Left Sidebar removed per request -->

    <!-- Right Controls Panel -->
    <div class="right-panel">
        <button class="control-btn tooltip" data-tooltip="Zoom In">
            <i class="fas fa-plus"></i>
        </button>
        <button class="control-btn tooltip" data-tooltip="Zoom Out">
            <i class="fas fa-minus"></i>
        </button>
        <div class="divider"></div>
        <button class="control-btn tooltip" data-tooltip="My Location">
            <i class="fas fa-crosshairs"></i>
        </button>
        <button class="control-btn tooltip" data-tooltip="Fullscreen">
            <i class="fas fa-expand"></i>
        </button>
        <div class="divider"></div>
        <button class="control-btn tooltip" data-tooltip="Toggle Theme" id="theme-toggle">
            <i class="fas fa-moon"></i>
        </button>
        <button class="control-btn tooltip" data-tooltip="Info" id="info-toggle">
            <i class="fas fa-info"></i>
        </button>
    </div>

    <!-- Legend -->
    <select id="pollutant-picker">
        <option value="pm25">PM2.5</option>
        <option value="pm10">PM10</option>
        <option value="co">CO</option>
        <option value="no2">NO‚ÇÇ</option>
        <option value="o3">O‚ÇÉ</option>
        <option value="so2">SO‚ÇÇ</option>
    </select>
    <div class="legend" id="legend"></div>

    <!-- Right Info Panel -->
    <div id="info-panel">
        <!-- City Information Section -->
        <div class="panel-section" id="city-section">
            <div class="aqi-display">
                <div class="aqi-label">Air Quality Index</div>
                <div class="aqi-badge aqi-moderate" id="aqi">--</div>
            </div>
        </div>

        <!-- Weather Conditions Section -->
        <div class="panel-section" id="weather-section">
            <h2>üå§Ô∏è Current Weather</h2>
            
            <div class="info-grid">
                <!-- Temperature -->
                <div class="info-card">
                    <div class="info-card-title">üå°Ô∏è Temperature</div>
                    <div class="info-card-value">
                        <span class="info-card-number"></span><span class="info-card-unit">¬∞C</span>
                    </div>
                    <div class="info-card-detail">Feels like --¬∞C</div>
                </div>
            
                <!-- Humidity -->
                <div class="info-card">
                    <div class="info-card-title">üíß Humidity</div>
                    <div class="info-card-value">
                        <span class="info-card-number"></span><span class="info-card-unit">%</span>
                    </div>
                    <div class="info-card-detail">Dew point --¬∞C</div>
                </div>
            
                <!-- Wind Speed -->
                <div class="info-card">
                    <div class="info-card-title">üí® Wind Speed</div>
                    <div class="info-card-value">
                        <span class="info-card-number"></span><span class="info-card-unit">km/h</span>
                    </div>
                    <div class="info-card-detail">Direction: --¬∞</div>
                </div>
            
                <!-- Precipitation -->
                <div class="info-card">
                    <div class="info-card-title">üåßÔ∏è Precipitation</div>
                    <div class="info-card-value">
                        <span class="info-card-number"></span><span class="info-card-unit">mm</span>
                    </div>
                    <div class="info-card-detail">Cloud cover: --%</div>
                </div>
            
                <!-- Cloud Cover -->
                <div class="info-card">
                    <div class="info-card-title">‚òÅÔ∏è Cloud Cover</div>
                    <div class="info-card-value">
                        <span class="info-card-number"></span><span class="info-card-unit">%</span>
                    </div>
                    <div class="info-card-detail">Sky fully overcast</div>
                </div>
            
                <!-- Surface Pressure -->
                <div class="info-card">
                    <div class="info-card-title">üß≠ Surface Pressure</div>
                    <div class="info-card-value">
                        <span class="info-card-number"></span><span class="info-card-unit">hPa</span>
                    </div>
                    <div class="info-card-detail">Stable pressure</div>
                </div>
            </div>
        </div>

        <!-- Air Pollutants Section -->
        <div class="panel-section" id="pollutants-section">
            <h2>üè≠ Air Pollutants</h2>
        </div>
        
        <div class="panel-section" id="data-sources-section">
            <div class="section-title">Data Sources</div>
            <div style="padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                <p style="font-size: 12px; color: rgba(255,255,255,0.7); margin-bottom: 8px;">
                    <span style="margin-right: 6px;"></span><i class="fas fa-satellite-dish"></i> NASA EarthData
                </p>
                <p style="font-size: 12px; color: rgba(255,255,255,0.7); margin-bottom: 8px;">
                    <span style="margin-right: 6px;"></span><i class="fas fa-cloud-sun"></i> Open-Meteo
                </p>
            </div>
        </div>
    </div>

    <!-- Toggle Button for Info Panel -->
    <!-- <button id="panel-toggle"></button> -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="../static/js/script.js"></script>
    <script>
        const LEGEND_CONFIGS = {
            pm25: {
                title: 'PM2.5',
                unit: 'Œºg/m¬≥',
                maxValue: 250,
                thresholds: [15, 35, 55, 110, 250],
                categories: ['Good', 'Moderate', 'Unhealthy for Sensitive Groups', 'Unhealthy', 'Very Unhealthy'],
                colors: ['#00e400', '#ffff00', '#ff7e00', '#ff0000', '#8f3f97']
            },
            pm10: {
                title: 'PM10',
                unit: 'Œºg/m¬≥',
                maxValue: 420,
                thresholds: [50, 100, 250, 350, 420],
                categories: ['Good', 'Moderate', 'Unhealthy for Sensitive Groups', 'Unhealthy', 'Very Unhealthy'],
                colors: ['#00e400', '#ffff00', '#ff7e00', '#ff0000', '#8f3f97']
            },
            co: {
                title: 'CO',
                unit: 'ppm',
                maxValue: 30,
                thresholds: [4.4, 9.4, 12.4, 15.4, 30],
                categories: ['Good', 'Moderate', 'Unhealthy for Sensitive Groups', 'Unhealthy', 'Very Unhealthy'],
                colors: ['#00e400', '#ffff00', '#ff7e00', '#ff0000', '#8f3f97']
            },
            no2: {
                title: 'NO2',
                unit: 'ppb',
                maxValue: 400,
                thresholds: [53, 100, 360, 649, 1249],
                categories: ['Good', 'Moderate', 'Unhealthy for Sensitive Groups', 'Unhealthy', 'Very Unhealthy'],
                colors: ['#00e400', '#ffff00', '#ff7e00', '#ff0000', '#8f3f97']
            },
            o3: {
                title: 'O3',
                unit: 'ppb',
                maxValue: 300,
                thresholds: [54, 70, 85, 105, 200],
                categories: ['Good', 'Moderate', 'Unhealthy for Sensitive Groups', 'Unhealthy', 'Very Unhealthy'],
                colors: ['#00e400', '#ffff00', '#ff7e00', '#ff0000', '#8f3f97']
            },
            so2: {
                title: 'SO2',
                unit: 'ppb',
                maxValue: 800,
                thresholds: [35, 75, 185, 304, 604],
                categories: ['Good', 'Moderate', 'Unhealthy for Sensitive Groups', 'Unhealthy', 'Very Unhealthy'],
                colors: ['#00e400', '#ffff00', '#ff7e00', '#ff0000', '#8f3f97']
            }
        };

        const availablePollutants = [
            { key: 'pm25', label: 'PM2.5' },
            { key: 'pm10', label: 'PM10' },
            { key: 'co', label: 'CO' },
            { key: 'no2', label: 'NO2' },
            { key: 'o3', label: 'O3' },
            { key: 'so2', label: 'SO2' }
        ];

        createLegend({
            selector: '.legend',
            ...LEGEND_CONFIGS.pm25,
            availablePollutants
        });

    </script>
</body>
</html>